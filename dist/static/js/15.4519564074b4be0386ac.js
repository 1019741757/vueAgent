webpackJsonp([15],{"7SmP":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mtWM"),a("mw3O");var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ActivityStatistics"},[a("div",{staticClass:"ActivityStatistics_body animated fadeInDown"},[a("div",{staticClass:"title_h3"},[t._v(" 网吧离线状态管理\n      "),a("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 当网吧48小时内无任何收益数据时，相应网吧会被系统自动判定为离线状态，如系统重新接收到相应网吧的任何一条收益数据时，该网吧会自动转变为在线状态  ")]),t._v(" "),a("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"-15px","font-size":"16px"}})])],1),t._v(" "),a("div",{staticClass:"title_pop"},[a("span",[t._v("当前离线网吧总数："),a("a",[t._v(t._s(t.GetEarning.OffLineCount||0))]),t._v(" 家")])]),t._v(" "),a("el-card",{attrs:{shadow:"always"}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{padding:"0 5px"},attrs:{inline:!0}},[a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"选择离线时间："}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.DateChange},model:{value:t.Datevalue,callback:function(e){t.Datevalue=e},expression:"Datevalue"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"10%"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入网吧名称",clearable:""},on:{clear:t.onSubmit},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSubmit(e):null}},model:{value:t.netbarName,callback:function(e){t.netbarName=e},expression:"netbarName"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"10%"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入网吧ID",clearable:""},on:{clear:t.onSubmit},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSubmit(e):null}},model:{value:t.netbarId,callback:function(e){t.netbarId=e},expression:"netbarId"}})],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择是否查证",clearable:""},on:{change:t.onSubmit},model:{value:t.isVerify,callback:function(e){t.isVerify=e},expression:"isVerify"}},t._l(t.statusList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"pull-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.isRemove,callback:function(e){t.isRemove=e},expression:"isRemove"}},[a("el-tab-pane",{attrs:{label:"未移除列表",name:"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.GetNetbarStateCensusList,"tooltip-effect":"dark",border:"","header-cell-style":{background:"rgb(220, 223, 230)",color:"#333"}}},[a("el-table-column",{attrs:{property:"NetbarName",label:"网吧名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"NetbarId",label:"网吧ID"}}),t._v(" "),a("el-table-column",{attrs:{property:"AgencyName",label:"所属代理商"}}),t._v(" "),a("el-table-column",{attrs:{property:"AgencyId",label:"代理商ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"State",label:"网吧状态",align:"center",width:"120","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"0"==e.row.State?"danger":"1"==e.row.State?"success":"","close-transition":""}},[t._v("\n                  "+t._s("0"==e.row.State?"离线":"1"==e.row.State?"在线":"")+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"CurrentDate",label:"最后在线时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"Operator",label:"操作人"}}),t._v(" "),a("el-table-column",{attrs:{property:"OperatorTime",label:"操作时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"Reason",label:"原因"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.IsVerify?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){a.stopPropagation(),t.Verifyformation(e.$index,e.row)}}},[t._v("标记查证")]):a("el-button",{attrs:{size:"small",disabled:""}},[t._v("　已查证")]),t._v(" "),0!=e.row.IsVerify?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){a.stopPropagation(),t.deletInformation(e.$index,e.row,1)}}},[t._v("移除")]):t._e()]}}])})],1),t._v(" "),a("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"page-sizes":[10,15,20],"page-size":10,"current-page":t.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.sizeCurrentChange}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已移除列表",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.GetNetbarStateCensusList,"tooltip-effect":"dark",border:"","header-cell-style":{background:"rgb(220, 223, 230)",color:"#333"}}},[a("el-table-column",{attrs:{property:"NetbarName",label:"网吧名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"NetbarId",label:"网吧ID"}}),t._v(" "),a("el-table-column",{attrs:{property:"AgencyName",label:"所属代理商"}}),t._v(" "),a("el-table-column",{attrs:{property:"AgencyId",label:"代理商ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"State",label:"网吧状态",align:"center",width:"120","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"0"==e.row.State?"danger":"1"==e.row.State?"success":"","close-transition":""}},[t._v("\n                  "+t._s("0"==e.row.State?"离线":"1"==e.row.State?"在线":"")+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"CurrentDate",label:"最后在线时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"Operator",label:"操作人",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"OperatorTime",label:"操作时间"}}),t._v(" "),a("el-table-column",{attrs:{property:"Reason",label:"原因"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){a.stopPropagation(),t.deletInformation(e.$index,e.row,0)}}},[t._v("移回")])]}}])})],1),t._v(" "),a("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"page-sizes":[10,15,20],"page-size":10,"current-page":t.pageNo,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.sizeCurrentChange}})],1)],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入离线原因",visible:t.VerifyformationCodeName,width:"500px"},on:{"update:visible":function(e){t.VerifyformationCodeName=e}}},[a("el-form",{ref:"VerifyformationList",staticClass:"demo-ruleForm",attrs:{model:t.VerifyformationList,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"离线原因：",prop:"Reason"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:t.VerifyformationList.Reason,callback:function(e){t.$set(t.VerifyformationList,"Reason",e)},expression:"VerifyformationList.Reason"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.VerifyformationCodeName=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.VerifyInformationSubmit("VerifyformationList")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},r=a("VU/8")({name:"StateStatistics",data:function(){return{pageSize:10,pageNo:1,total:0,startTime:null,endTime:null,netbarName:null,netbarId:null,isVerify:null,isRemove:"0",GetEarning:{},Datevalue:{},VerifyformationCodeName:!1,VerifyformationList:{Reason:null,NetbarId:null},GetNetbarStateCensusList:[],netbarList:[{id:"0",name:"离线"},{id:"1",name:"在线"}],statusList:[{id:"0",name:"未查证"},{id:"1",name:"已经查证"}],rules:{Reason:[{required:!0,message:"请输入离线原因",trigger:"blur"}]}}},created:function(){this.getData()},methods:{handleCurrentChange:function(t){this.pageNo=t,this.getData()},sizeCurrentChange:function(t){this.pageSize=t,this.getData()},onSubmit:function(){this.pageNo=1,this.getData()},handleClick:function(t,e){this.getData()},DateChange:function(){if(this.Datevalue){var t=this.Datevalue[0],e=this.Datevalue[1];this.startTime=this.$moment(t).format("YYYY-MM-DD"),this.endTime=this.$moment(e).format("YYYY-MM-DD"),this.getData()}else this.startTime="",this.endTime="",this.getData()},getData:function(){var t=this,e={startTime:this.startTime||null,endTime:this.endTime||null,netbarName:this.netbarName||null,netbarId:this.netbarId||null,isVerify:this.isVerify||null,isRemove:this.isRemove||null,pageSize:this.pageSize,pageIndex:this.pageNo};this.axios.get("/api/Netbar/GetNetbarStateCensusList",e).then(function(e){if("OK"==e.statusText){var a=e.data.Items;t.GetNetbarStateCensusList=a,t.total=e.data.Total}}),this.axios.get("/api/AgencyEarning/GetEarning",e).then(function(e){if("OK"==e.statusText){var a=e.data.Object;t.GetEarning=a}})},deletInformation:function(t,e,a){var n=this,r=(e.NetbarId,null);r=1==a?"移除":"移入",this.$confirm("确定"+r+"网吧吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){var t=n,i={NetbarId:e.NetbarId,IsRemove:a};n.axios.post("/api/Netbar/RemoveNetbar",i).then(function(e){"OK"==e.statusText?(t.getData(),t.$message({message:r+"成功",type:"success"})):t.$message.error(e.data.Message)})}).catch(function(){})},Verifyformation:function(t,e){this.VerifyformationCodeName=!0,this.VerifyformationList.NetbarId=e.NetbarId},VerifyInformationSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=e,n={NetbarId:e.VerifyformationList.NetbarId,Reason:e.VerifyformationList.Reason};e.axios.post("/api/Netbar/Verify",n).then(function(t){"OK"==t.statusText?(a.getData(),a.VerifyformationCodeName=!1,a.$message({message:"标记成功",type:"success"})):a.$message.error(t.data.Message)})})}}},n,!1,null,null,null);e.default=r.exports}});
//# sourceMappingURL=15.4519564074b4be0386ac.js.map