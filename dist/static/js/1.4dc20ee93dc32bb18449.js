webpackJsonp([1],{"9bBU":function(e,t,o){o("mClu");var i=o("FeBl").Object;e.exports=function(e,t,o){return i.defineProperty(e,t,o)}},C4MV:function(e,t,o){e.exports={default:o("9bBU"),__esModule:!0}},DfDB:function(e,t){},"T+/8":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("bOdI"),s=o.n(i),n=(o("NYxO"),o("TIfe")),r=o("Av7u"),a=o.n(r),l=o("Wxq9"),d={name:"login",data:function(){var e,t=this;return{ImgCode:"",ValidateKey:"",checked:!0,loginForm:{accountNumber:null,password:null},loading:!1,Isboxform:0,Modifyshow:!0,Modifycount:"",Modifytimer:"",BodifyInformationList:{},CodeToText:l.CodeToText,TextToCode:l.TextToCode,provinceAndCityData:l.provinceAndCityData,selectedOptions:[],Registershow:!0,Registercount:"",Registertimer:"",RegisterInformationList:{checked:!1},loginRules:(e={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}],AccountNumber:[{required:!0,message:"请输入账号",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 10 个字符",trigger:"blur"}],ImgCode:[{required:!0,message:"请输入图形验证码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],accountNumber:[{required:!0,message:"请输入账号",trigger:"blur"}]},s()(e,"password",[{required:!0,message:"请输入密码",trigger:"blur"}]),s()(e,"Phone",[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[2|3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码"}]),s()(e,"PhoneCode",[{required:!0,message:"请输入验证码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}]),s()(e,"Password",[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]),s()(e,"password_confirm",[{required:!0,validator:function(e,o,i){""===o?i(new Error("请再次输入密码")):o!==t.BodifyInformationList.Password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]),s()(e,"Register_confirm",[{required:!0,validator:function(e,o,i){""===o?i(new Error("请再次输入密码")):o!==t.RegisterInformationList.Password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]),s()(e,"handleChange",[{type:"date",required:!0,validator:function(e,o,i){t.RegisterInformationList.Area?i():i(new Error("请选择所属地区"))},trigger:"change"}]),e)}},created:function(){},methods:{handleChange:function(e){this.RegisterInformationList.Area=this.CodeToText[e[0]]+this.CodeToText[e[1]]},ForgetPassword:function(e){this.Isboxform=e,this.GetVerifyCode()},GetVerifyCode:function(){var e=this;this.axios.get("/api/Account/GetVerifyCode",{}).then(function(t){"OK"==t.statusText?(e.ImgCode="data:image/png;base64,"+t.data.Object.Base64Img,e.ValidateKey=t.data.Object.ValidateKey):e.$message.error(t.data.Message)})},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return!1;e.loading=!0;var o={Phone:e.loginForm.accountNumber,LoginPwd:a.a.MD5(e.loginForm.password).toString(),validateKey:e.ValidateKey},i=e;e.axios.post("/api/Account/GenerateAccessToken",o).then(function(t){if("OK"==t.statusText){var o=t.data.Object.AccessToken;e.$store.dispatch("Login",o).then(function(){setTimeout(function(){i.loading=!1,i.$router.push({path:"/homepage"})},1e3),Object(n.e)("IFGetTop1MsgShow","true")}).catch(function(){e.loading=!1})}else i.loading=!1,i.GetVerifyCode(),i.loginForm.ImgCode="",i.$message.error(t.data.Message)})})},ModifyGetPhoneCode:function(){if(this.BodifyInformationList.Phone)if(this.BodifyInformationList.ImgCode){var e={phone:this.BodifyInformationList.Phone,imgCode:this.BodifyInformationList.ImgCode,validateKey:this.ValidateKey},t=this;this.axios.get("/api/Account/GetPhoneCode",e).then(function(e){"OK"==e.statusText?t.ModifygetCode():t.$message.error(e.data.Message)})}else this.$message.error("请先输入图形验证码");else this.$message.error("请先输入手机号码")},ModifygetCode:function(){var e=this;this.Modifytimer||(this.Modifycount=60,this.Modifyshow=!1,this.Modifytimer=setInterval(function(){e.Modifycount>0&&e.Modifycount<=60?e.Modifycount--:(e.Modifyshow=!0,clearInterval(e.Modifytimer),e.Modifytimer=null)},1e3))},PasswordSubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;var i={phone:t.BodifyInformationList.Phone,loginPwd:t.BodifyInformationList.password_confirm,phoneCode:t.BodifyInformationList.PhoneCode},s="/api/Account/FindPassword?phone="+t.BodifyInformationList.Phone+"&loginPwd="+t.BodifyInformationList.password_confirm+"&phoneCode="+t.BodifyInformationList.PhoneCode,n=t;t.axios.post(s,i).then(function(t){"OK"==t.statusText?(n.$message({message:"修改成功,请登录！",type:"success"}),n.Isboxform=0,clearInterval(n.Modifytimer),n.$refs[e].resetFields()):n.$message.error(t.data.Message)})})},RegisterGetPhoneCode:function(){if(this.RegisterInformationList.Phone)if(this.RegisterInformationList.ImgCode){var e={phone:this.RegisterInformationList.Phone,imgCode:this.RegisterInformationList.ImgCode,validateKey:this.ValidateKey},t=this;this.axios.get("/api/Account/GetPhoneCode",e).then(function(e){"OK"==e.statusText?t.RegistergetCode():(t.GetVerifyCode(),t.RegisterInformationList.ImgCode="",t.$message.error(e.data.Message))})}else this.$message.error("请先输入图形验证码");else this.$message.error("请先输入手机号码")},RegistergetCode:function(){var e=this;this.Registertimer||(this.Registercount=60,this.Registershow=!1,this.Registertimer=setInterval(function(){e.Registercount>0&&e.Registercount<=60?e.Registercount--:(e.Registershow=!0,clearInterval(e.Registertimer),e.Registertimer=null)},1e3))},RegisterSubmit:function(e){var t=this;this.RegisterInformationList.checked?this.$refs[e].validate(function(o){if(!o)return!1;var i={Phone:t.RegisterInformationList.Phone,Name:t.RegisterInformationList.name,LoginPwd:t.RegisterInformationList.Register_confirm,Area:t.RegisterInformationList.Area,ValidateKey:t.ValidateKey,ImgCode:t.RegisterInformationList.ImgCode,PhoneCode:t.RegisterInformationList.PhoneCode},s=t;t.axios.post("/api/Account/Register",i).then(function(t){"OK"==t.statusText?(s.$message({message:"注册成功,请登录！",type:"success"}),s.Isboxform=0,clearInterval(s.Registertimer),s.$refs[e].resetFields()):s.$message.error(t.data.Message)})}):this.$message.error("请先同意用户协议")}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-box"},[o("div",{staticClass:"login-content"},[0==e.Isboxform?o("div",{staticClass:"login_admin"},[o("div",{staticClass:"login-content-form login-container animated fadeInDown"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[o("div",{staticClass:"login-content-title"},[e._v("\n            代理商后台登录\n          ")]),e._v(" "),o("div",{staticClass:"input-box-input"},[o("el-form-item",{attrs:{prop:"accountNumber"}},[o("el-input",{attrs:{name:"accountNumber","prefix-icon":"el-icon-mobile-phone",type:"text",autoComplete:"on",placeholder:"请输入手机号码"},model:{value:e.loginForm.accountNumber,callback:function(t){e.$set(e.loginForm,"accountNumber",t)},expression:"loginForm.accountNumber"}})],1),e._v(" "),o("div",{staticClass:"clearfix"})],1),e._v(" "),o("div",{staticClass:"input-box-input"},[o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{name:"password","prefix-icon":"el-icon-goods",type:"password",autoComplete:"on",placeholder:"请输入登录密码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),o("div",{staticClass:"clearfix"})],1),e._v(" "),o("el-button",{staticStyle:{width:"100%",height:"40px","font-size":"16px"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("立 即 登 录")]),e._v(" "),o("div",{},[o("p",{staticClass:"ForgetPassword fl",on:{click:function(t){e.ForgetPassword(1)}}},[e._v(" 忘记密码 ")]),e._v(" "),o("p",{staticClass:"ForgetPassword fr",on:{click:function(t){e.ForgetPassword(2)}}},[e._v("去注册")])])],1)],1)]):e._e(),e._v(" "),1==e.Isboxform?o("div",{staticClass:"login_admin"},[o("div",{staticClass:"login-content-form login-container animated fadeInRight"},[o("el-form",{ref:"BodifyInformationList",staticClass:"login-form",attrs:{autoComplete:"on",model:e.BodifyInformationList,rules:e.loginRules,"label-position":"left","label-width":"120px"}},[o("div",{staticClass:"login-content-title"},[o("i",{staticClass:"el-icon-back",on:{click:function(t){e.ForgetPassword(0)}}}),e._v("\n            忘记密码\n          ")]),e._v(" "),o("el-form-item",{attrs:{label:"手机号码：",prop:"Phone"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入手机号码"},model:{value:e.BodifyInformationList.Phone,callback:function(t){e.$set(e.BodifyInformationList,"Phone",t)},expression:"BodifyInformationList.Phone"}})],1),e._v(" "),o("div",{staticClass:"input-box-input"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"图形验证码：",prop:"ImgCode"}},[o("el-input",{attrs:{name:"ImgCode",type:"text",autoComplete:"off",placeholder:"请输入图形验证码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.BodifyInformationList.ImgCode,callback:function(t){e.$set(e.BodifyInformationList,"ImgCode",t)},expression:"BodifyInformationList.ImgCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("img",{staticClass:"ImgCode",attrs:{src:e.ImgCode,alt:""}})])],1)],1),e._v(" "),o("div",{staticStyle:{position:"relative"}},[o("el-form-item",{attrs:{label:"验证码：",prop:"PhoneCode"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.BodifyInformationList.PhoneCode,callback:function(t){e.$set(e.BodifyInformationList,"PhoneCode",t)},expression:"BodifyInformationList.PhoneCode"}})],1),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.Modifyshow,expression:"Modifyshow"}],staticStyle:{position:"absolute",top:"0",right:"0px"},attrs:{type:"primary",icon:"el-icon-mobile-phone"},on:{click:function(t){e.ModifyGetPhoneCode()}}},[e._v("获取验证码")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.Modifyshow,expression:"!Modifyshow"}],staticStyle:{position:"absolute",top:"0",right:"0px"},attrs:{type:"primary",icon:"el-icon-mobile-phone"}},[e._v("倒计时"+e._s(e.Modifycount)+"s")])],1),e._v(" "),o("el-form-item",{attrs:{label:"设置新密码：",prop:"Password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入新密码"},model:{value:e.BodifyInformationList.Password,callback:function(t){e.$set(e.BodifyInformationList,"Password",t)},expression:"BodifyInformationList.Password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"确认新密码：",prop:"password_confirm"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请确认新密码"},model:{value:e.BodifyInformationList.password_confirm,callback:function(t){e.$set(e.BodifyInformationList,"password_confirm",t)},expression:"BodifyInformationList.password_confirm"}})],1),e._v(" "),o("el-button",{staticStyle:{width:"100%",height:"40px","font-size":"16px"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){t.preventDefault(),e.PasswordSubmit("BodifyInformationList")}}},[e._v("确定修改")])],1)],1)]):e._e(),e._v(" "),2==e.Isboxform?o("div",{staticClass:"login_admin"},[o("div",{staticClass:"login-content-form login-container animated fadeInRight",staticStyle:{top:"12%"}},[o("el-form",{ref:"RegisterInformationList",staticClass:"login-form",attrs:{autoComplete:"on",model:e.RegisterInformationList,rules:e.loginRules,"label-position":"left","label-width":"120px"}},[o("div",{staticClass:"login-content-title"},[o("i",{staticClass:"el-icon-back",on:{click:function(t){e.ForgetPassword(0)}}}),e._v("\n            注册\n          ")]),e._v(" "),o("el-form-item",{attrs:{label:"手机号码：",prop:"Phone"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入手机号码"},model:{value:e.RegisterInformationList.Phone,callback:function(t){e.$set(e.RegisterInformationList,"Phone",t)},expression:"RegisterInformationList.Phone"}})],1),e._v(" "),o("div",{staticClass:"input-box-input"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"图形验证码：",prop:"ImgCode"}},[o("el-input",{attrs:{name:"ImgCode",type:"text",autoComplete:"off",placeholder:"请输入图形验证码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.RegisterInformationList.ImgCode,callback:function(t){e.$set(e.RegisterInformationList,"ImgCode",t)},expression:"RegisterInformationList.ImgCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("img",{staticClass:"ImgCode",attrs:{src:e.ImgCode,alt:""}})])],1)],1),e._v(" "),o("div",{staticStyle:{position:"relative"}},[o("el-form-item",{attrs:{label:"验证码：",prop:"PhoneCode"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.RegisterInformationList.PhoneCode,callback:function(t){e.$set(e.RegisterInformationList,"PhoneCode",t)},expression:"RegisterInformationList.PhoneCode"}})],1),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.Registershow,expression:"Registershow"}],staticStyle:{position:"absolute",top:"0",right:"0px"},attrs:{type:"primary",icon:"el-icon-mobile-phone"},on:{click:function(t){e.RegisterGetPhoneCode()}}},[e._v("获取验证码")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.Registershow,expression:"!Registershow"}],staticStyle:{position:"absolute",top:"0",right:"0px"},attrs:{type:"primary",icon:"el-icon-mobile-phone"}},[e._v("倒计时"+e._s(e.Registercount)+"s")])],1),e._v(" "),o("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.RegisterInformationList.name,callback:function(t){e.$set(e.RegisterInformationList,"name",t)},expression:"RegisterInformationList.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"设置密码：",prop:"Password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入新密码"},model:{value:e.RegisterInformationList.Password,callback:function(t){e.$set(e.RegisterInformationList,"Password",t)},expression:"RegisterInformationList.Password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"确认密码：",prop:"Register_confirm"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请确认新密码"},model:{value:e.RegisterInformationList.Register_confirm,callback:function(t){e.$set(e.RegisterInformationList,"Register_confirm",t)},expression:"RegisterInformationList.Register_confirm"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"所属地区：",prop:"handleChange"}},[o("el-cascader",{attrs:{size:"large",options:e.provinceAndCityData},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),o("div",{staticClass:"Register_checkboc",staticStyle:{"text-align":"center"}},[o("el-checkbox",{model:{value:e.RegisterInformationList.checked,callback:function(t){e.$set(e.RegisterInformationList,"checked",t)},expression:"RegisterInformationList.checked"}},[e._v("我已经阅读并同意《580网吧特权用户协议》")])],1),e._v(" "),o("el-button",{staticStyle:{width:"100%",height:"40px","font-size":"16px"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){t.preventDefault(),e.RegisterSubmit("RegisterInformationList")}}},[e._v(" 注 册 ")])],1)],1)]):e._e()])])},staticRenderFns:[]};var m=o("VU/8")(d,c,!1,function(e){o("DfDB")},null,null);t.default=m.exports},bOdI:function(e,t,o){"use strict";t.__esModule=!0;var i,s=o("C4MV"),n=(i=s)&&i.__esModule?i:{default:i};t.default=function(e,t,o){return t in e?(0,n.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},mClu:function(e,t,o){var i=o("kM2E");i(i.S+i.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})}});
//# sourceMappingURL=1.4dc20ee93dc32bb18449.js.map